import{K as u,r as m,j as s,L as k,$ as n,V as j,S as P}from"./app-DcA1Ya5n.js";import{A as F}from"./Authenticated-CLbR4XAu.js";import{s as i}from"./index-DYc8GT79.js";import{s as G}from"./statusConstants-B9bmVMgg.js";import{H as K,t as x}from"./index-DgmxTZmh.js";import{u as M,m as L,a as U,b as V,c as Y,d as z}from"./index-fVNV7TtF.js";import{b as J}from"./chunk-57V4RE7B-B_vxGtag.js";import{b as l}from"./chunk-KCYYJJH4-BJsl7Des.js";import{c as Q}from"./chunk-J7I6W5JF-DY-1FMYK.js";import{d as W,a as X,b as Z,m as f}from"./chunk-Z2IJA2C6-DP0e0IxB.js";import{i as S}from"./chunk-5CAICSBD-DejQdHXG.js";import{t as ss,a as es,b as r,c as as,d as ts,e as o}from"./chunk-F3UDT23P-CZ-s9wDQ.js";import"./index-0-18Hqup.js";import"./useDialog-BCMhdX0G.js";import"./index-gG7cdACS.js";import"./chunk-SLABUSGS-DvehVeir.js";import"./index-BSEFKlKf.js";import"./useMenuTriggerState-xe7R_jTd.js";import"./LiveAnnouncer-DM9XYwof.js";function ys(){var D,O,N,I,T;const{asset:a,archivedDetails:rs}=u().props,_=(O=(D=u().props.auth)==null?void 0:D.user)==null?void 0:O.role,{isOpen:q,onOpen:$,onClose:d}=M(),[E,b]=m.useState(""),[A,g]=m.useState(""),[v,y]=m.useState(""),[t,os]=m.useState(null),{isOpen:B,onClose:h}=M(),H=(e,c,C,w,R)=>{if(!C||!w||!R){j.error("Please fill in all fields.");return}P.post(i("assets.archive",{assetId:e,assetNo:c}),{_method:"PUT",reason:C,status:w,condition:R},{onSuccess:()=>{j.success("Asset archived!"),d()},onError:p=>{j.error("Failed to archive asset. "+((p==null?void 0:p.message)||""))}}),P.reload()};return s.jsxs(F,{auth:u().props.auth,errors:u().props.errors,children:[s.jsx(k,{title:`Assets by ${(N=a.employee)==null?void 0:N.EMPLOYEENAME}`}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"my-6",children:_==="admin"&&s.jsx(l,{color:"primary",variant:"flat",as:n,href:i("employees.index"),children:"â† Back to Employees"})}),s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"General Asset Information"}),s.jsxs("div",{className:"border p-4 rounded-lg mb-6",children:[s.jsxs("p",{children:["Asset ID: ",s.jsx("strong",{children:a==null?void 0:a.ASSETSID})]}),s.jsxs("p",{children:["Employee ID:"," ",s.jsx("strong",{children:((I=a==null?void 0:a.employee)==null?void 0:I.EMPLOYEEID)??"--"})]}),s.jsxs("p",{children:["Employee Name:"," ",s.jsx("strong",{children:(T=a==null?void 0:a.employee)==null?void 0:T.EMPLOYEENAME})]})]}),_==="admin"&&s.jsx("div",{className:"flex justify-start items-center gap-2 mb-3",children:s.jsxs(J,{children:[s.jsx(l,{color:"primary",as:n,href:i("assets.create",{id:a.ASSETSID}),children:"Add New Asset"}),s.jsx(l,{as:n,color:"success",variant:"flat",href:i("assets.viewEmployeeAssets",{id:a.EMPLOYEEID}),children:"View to Print"})]})}),s.jsxs(ss,{isVirtualized:!0,"aria-label":"Asset Details table",isStriped:!0,children:[s.jsxs(es,{children:[s.jsx(r,{children:"Asset #"}),s.jsx(r,{children:"System Asset ID"}),s.jsx(r,{children:"Description"}),s.jsx(r,{children:"Model"}),s.jsx(r,{children:"Serial No"}),s.jsx(r,{children:"Date Issued"}),s.jsx(r,{children:"Status"}),s.jsx(r,{children:"Actions"})]}),s.jsx(as,{emptyContent:"No rows to display.",children:a.asset_details.map(e=>{var c;return s.jsxs(ts,{children:[s.jsx(o,{children:e.ASSETNUMBER}),s.jsx(o,{children:e.SYSTEMASSETID}),s.jsx(o,{children:e.DESCRIPTION}),s.jsx(o,{children:e.MODEL}),s.jsx(o,{children:e.SERIALNO}),s.jsx(o,{children:e.DATEISSUUED?new Date(e.DATEISSUUED).toLocaleDateString():"--"}),s.jsx(o,{children:s.jsx(Q,{color:G[(c=e.STATUS)==null?void 0:c.trim()]||"default",variant:"dot",className:"capitalize border-none gap-1 text-default-600",children:e.STATUS})}),s.jsx(o,{children:s.jsxs(W,{children:[s.jsx(X,{children:s.jsx(l,{isIconOnly:!0,size:"sm",variant:"light",children:s.jsx(K,{size:20,className:"text-default-800"})})}),s.jsxs(Z,{children:[s.jsx(f,{as:n,children:"View"},"view"),s.jsx(f,{as:n,href:i("assets.edit",{assetId:e.ASSETID,assetNo:e.ASSETNO}),children:"Update"},"update"),s.jsx(f,{className:"text-danger",color:"danger",onPress:()=>{b(""),g(""),y(""),$()},children:"Dispose"},"dispose")]})]})})]},e.ASSETNO)})})]}),s.jsx(L,{isOpen:q,onClose:d,onOpenChange:d,children:s.jsxs(U,{children:[s.jsx(V,{className:"text-danger-500",children:"Are you sure you want to dispose this asset?"}),s.jsxs(Y,{children:[s.jsx(S,{isRequired:!0,label:"Reason for disposal",value:E,onChange:e=>b(e.target.value)}),s.jsx(x,{variant:"faded",isRequired:!0,label:"Asset Status",value:A,onChange:e=>g(e.target.value)}),s.jsx(x,{variant:"faded",isRequired:!0,label:"Asset Condition",value:v,onChange:e=>y(e.target.value)})]}),s.jsxs(z,{children:[s.jsx(l,{color:"warning",onPress:()=>H(a.asset_details[0].ASSETID,a.asset_details[0].ASSETNO,E,A,v),children:"Confirm"}),s.jsx(l,{color:"danger",variant:"light",onPress:d,children:"Close"})]})]})}),s.jsx(L,{isOpen:B,onClose:h,onOpenChange:h,children:s.jsxs(U,{children:[s.jsx(V,{children:"Asset Details"}),s.jsxs(Y,{children:[s.jsx(S,{type:"date",isReadOnly:!0,label:"Disposed Date",value:t!=null&&t.created_at?new Date(t.created_at).toISOString().split("T")[0]:""}),s.jsx(S,{isReadOnly:!0,label:"Reason for disposal",value:(t==null?void 0:t.archival_reason)||""}),s.jsx(x,{variant:"faded",isReadOnly:!0,label:"Asset Status",value:(t==null?void 0:t.status)||""}),s.jsx(x,{variant:"faded",isReadOnly:!0,label:"Asset Condition",value:(t==null?void 0:t.conditions)||""})]}),s.jsx(z,{children:s.jsx(l,{color:"danger",variant:"flat",onPress:h,children:"Close"})})]})})]})]})}export{ys as default};
