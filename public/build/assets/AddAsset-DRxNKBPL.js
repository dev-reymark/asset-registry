import{K as x,m as h,j as r,L as p,$ as R,V as I}from"./app-pkRCDXMr.js";import{A as P}from"./Authenticated-CdBBHsWP.js";import{F as g}from"./chunk-LAX3QLKM-DL9w6W2p.js";import{s as C,l as c}from"./chunk-2C6KNKEU-D3-NLaKg.js";import{i as a}from"./chunk-5CAICSBD-CSisO7OH.js";import{b as E}from"./chunk-KCYYJJH4-DxHcy4GM.js";import"./index-Chv6CjBU.js";import"./index-0-18Hqup.js";import"./chunk-SLABUSGS-DZJMNFeU.js";import"./useDialog-ClNL20au.js";import"./index-CPerPcla.js";import"./index-OYY1JW1G.js";import"./useListState-Czjkl2Ts.js";import"./useMenuTriggerState-CN49vNpd.js";function W(){var n,T;const{asset:e,products:i,assetno:o,workstations:f}=x().props;console.log(e,i);const{data:s,setData:t,post:D,processing:d,errors:O}=h({ASSETSID:e.ASSETSID,ASSETNO:o,PRODUCTID:"",DESCRIPTION:"",MODEL:"",SERIALNO:"",ISSUEDTO:e==null?void 0:e.EMPLOYEENAME,DATEISSUUED:"",IMAGEPATH:"",SERIALTYPE:"",STATUS:"",ASSETFROM:"",CONDITIONS:"",WORKSTATION:"",TYPESIZE:"",NOPRINT:"",COMPONENT:"",WITHCOMPONENTS:"",SYSTEMASSETID:`${(n=e==null?void 0:e.employee)==null?void 0:n.EMPLOYEEID}-${i==null?void 0:i.PRODUCTID}-${(T=e==null?void 0:e.asset_details)==null?void 0:T.ASSETNUMBER}`,SYSTEMCOMPONENTID:""}),N=l=>{const S=l.target.value,u=i.find(m=>String(m.PRODUCTID)===String(S));t({...s,PRODUCTID:S,DESCRIPTION:u?u.DESCRIPTION:""})},A=async l=>{l.preventDefault();try{await D(route("assets.store",{id:e==null?void 0:e.ASSETSID})),I.success("Asset added successfully")}catch(S){I.error("An error occurred while adding the asset."),console.error("An error occurred while adding the asset:",S)}};return r.jsxs(P,{children:[r.jsx(p,{title:"Add New Asset"}),r.jsx("div",{className:"my-4",children:r.jsxs(E,{color:"primary",variant:"light",as:R,href:route("assets.show",{id:e==null?void 0:e.ASSETSID}),children:["← Back to ",e==null?void 0:e.EMPLOYEENAME]})}),r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Add New Asset"}),r.jsxs(g,{onSubmit:A,className:"w-full flex flex-col gap-y-4",validationErrors:O,onReset:()=>{var l;t({ASSETSID:e.ASSETSID,ASSETNO:o,PRODUCTID:"",DESCRIPTION:"",MODEL:"",SERIALNO:"",ISSUEDTO:e==null?void 0:e.EMPLOYEENAME,DATEISSUUED:"",IMAGEPATH:"",SERIALTYPE:"",STATUS:"",ASSETFROM:"",CONDITIONS:"",WORKSTATION:"",TYPESIZE:"",NOPRINT:"",COMPONENT:"",WITHCOMPONENTS:"",SYSTEMASSETID:`${(l=e==null?void 0:e.employee)==null?void 0:l.EMPLOYEEID}-${e==null?void 0:e.ASSETSID}-${o}`,SYSTEMCOMPONENTID:""})},children:[r.jsxs("div",{className:"w-full border p-4 rounded-lg mb-4",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Asset ID:"})," ",(e==null?void 0:e.ASSETSID)||"--"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Employee Name:"})," ",(e==null?void 0:e.EMPLOYEENAME)||"--"]})]}),r.jsx("p",{children:"Please fill required fields."}),r.jsxs("div",{className:"w-full flex gap-4",children:[r.jsxs(C,{isRequired:!0,label:"Product",value:s.PRODUCTID,onChange:N,children:[r.jsx(c,{value:"",children:"Select a product"}),i.map(l=>r.jsx(c,{value:l.PRODUCTID,children:l.DESCRIPTION},l.PRODUCTID))]}),r.jsx(a,{label:"Description",isRequired:!0,isReadOnly:!0,value:s.DESCRIPTION,onChange:l=>t("DESCRIPTION",l.target.value)})]}),r.jsxs("div",{className:"w-full flex gap-4",children:[r.jsx(a,{isRequired:!0,isReadOnly:!0,label:"System Asset ID",value:s.SYSTEMASSETID,onChange:l=>t("SYSTEMASSETID",l.target.value),description:"This will be generated automatically."}),r.jsx(a,{label:"Date Issued",type:"date",isRequired:!0,value:s.DATEISSUUED,onChange:l=>t("DATEISSUUED",l.target.value)})]}),r.jsxs("div",{className:"w-full flex gap-4",children:[r.jsx(a,{label:"Model",isRequired:!0,value:s.MODEL,onChange:l=>t("MODEL",l.target.value)}),r.jsx(a,{description:"Serial Number must be unique.",label:"Serial Number",isRequired:!0,value:s.SERIALNO,onChange:l=>t("SERIALNO",l.target.value)})]}),r.jsxs("div",{className:"w-full flex gap-4",children:[r.jsx(a,{isRequired:!0,label:"Status",value:s.STATUS,onChange:l=>t("STATUS",l.target.value)}),r.jsx(a,{label:"Conditions",isRequired:!0,value:s.CONDITIONS,onChange:l=>t("CONDITIONS",l.target.value)})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(E,{type:"submit",color:"primary",isDisabled:d,children:d?"Adding...":"Add Asset"}),r.jsx(E,{type:"reset",color:"warning",variant:"flat",isDisabled:d,children:"Reset"})]})]})]})]})}export{W as default};
