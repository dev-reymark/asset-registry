import{K as c,r as h,j as s,L as as,$ as p,V as j,S as H}from"./app-BkmmMbAA.js";import{A as rs}from"./Authenticated-hoGu4jBm.js";import{s as x}from"./index-_IZS0DXX.js";import{s as ns}from"./statusConstants-B9bmVMgg.js";import{H as ts,t as $}from"./index-CjqGnODS.js";import{S as ls,a as os}from"./swiper-react-CoSadCJo.js";import{u,m as f,a as S,b as E,c as N,d as A}from"./index-G9Up8_1Z.js";import{b as o}from"./chunk-KCYYJJH4-BKhZWK96.js";import{t as B,a as q,b as n,c as G,d as k,e as t}from"./chunk-F3UDT23P-Bbzy3awn.js";import{c as is}from"./chunk-J7I6W5JF-D0F0k8Fv.js";import{d as ds,a as cs,b as hs,m as _}from"./chunk-Z2IJA2C6-CuUE2fVB.js";import{i as xs}from"./chunk-5CAICSBD-qVegJHr2.js";import"./index-0-18Hqup.js";import"./useDialog-Ddw4QHMy.js";import"./index-BBiCq9Hm.js";import"./chunk-SLABUSGS-C3PHiHUd.js";import"./index-C-8rcXXa.js";import"./LiveAnnouncer-C4GmY8MF.js";import"./useMenuTriggerState-B7eySsF6.js";function ws(){var y,w,P,M,L,R,U,V;const{asset:r}=c().props,F=(w=(y=c().props.auth)==null?void 0:y.user)==null?void 0:w.role,{isOpen:J,onOpen:K,onClose:d}=u(),[g,O]=h.useState(""),[C,b]=h.useState(""),[D,I]=h.useState(""),[a,Q]=h.useState(null),{isOpen:W,onOpen:X,onClose:T}=u(),{isOpen:Z,onOpen:ss,onClose:v}=u(),es=(e,l,i,Y,z)=>{if(!i||!Y||!z){j.error("Please fill in all fields.");return}H.post(x("assets.archive",{assetId:e,assetNo:l}),{_method:"PUT",reason:i,status:Y,condition:z},{onSuccess:()=>{j.success("Asset archived!"),d()},onError:m=>{j.error("Failed to archive asset. "+((m==null?void 0:m.message)||""))}}),H.reload()};return s.jsxs(rs,{auth:c().props.auth,errors:c().props.errors,children:[s.jsx(as,{title:`Assets by ${(P=r.employee)==null?void 0:P.EMPLOYEENAME}`}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"my-6",children:F==="admin"&&s.jsx(o,{color:"primary",variant:"flat",as:p,href:x("employees.index"),children:"← Back to Employees"})}),s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"General Asset Information"}),s.jsxs("div",{className:"border p-4 rounded-lg mb-6",children:[s.jsxs("p",{children:["Asset ID: ",s.jsx("strong",{children:r==null?void 0:r.ASSETSID})]}),s.jsxs("p",{children:["Employee ID:"," ",s.jsx("strong",{children:((M=r==null?void 0:r.employee)==null?void 0:M.EMPLOYEEID)??"--"})]}),s.jsxs("p",{children:["Employee Name:"," ",s.jsx("strong",{children:(L=r==null?void 0:r.employee)==null?void 0:L.EMPLOYEENAME})]})]}),s.jsx("div",{className:"flex justify-start items-center gap-2 mb-3",children:s.jsx(o,{as:p,color:"success",variant:"flat",href:x("assets.viewEmployeeAssets",{id:r.EMPLOYEEID}),children:"View to Print"})}),s.jsxs(B,{maxTableHeight:"300px",isVirtualized:!0,"aria-label":"Asset Details table",isStriped:!0,children:[s.jsxs(q,{children:[s.jsx(n,{children:"Asset #"}),s.jsx(n,{children:"System Asset ID"}),s.jsx(n,{children:"Description"}),s.jsx(n,{children:"Model"}),s.jsx(n,{children:"Serial No"}),s.jsx(n,{children:"Date Issued"}),s.jsx(n,{children:"Status"}),s.jsx(n,{children:"Actions"})]}),s.jsx(G,{emptyContent:"No rows to display.",children:r.asset_details.map(e=>{var l;return s.jsxs(k,{children:[s.jsx(t,{children:e.ASSETNUMBER}),s.jsx(t,{children:e.SYSTEMASSETID}),s.jsx(t,{children:e.DESCRIPTION}),s.jsx(t,{children:e.MODEL}),s.jsx(t,{children:e.SERIALNO}),s.jsx(t,{children:e.DATEISSUUED?new Date(e.DATEISSUUED).toLocaleDateString():"--"}),s.jsx(t,{children:s.jsx(is,{color:ns[(l=e.STATUS)==null?void 0:l.trim()]||"default",variant:"dot",className:"capitalize border-none gap-1 text-default-600",children:e.STATUS})}),s.jsx(t,{children:s.jsxs(ds,{children:[s.jsx(cs,{children:s.jsx(o,{isIconOnly:!0,size:"sm",variant:"light",children:s.jsx(ts,{size:20,className:"text-default-800"})})}),s.jsxs(hs,{children:[s.jsx(_,{onPress:()=>{Q(e),X()},children:"View"},"view"),s.jsx(_,{as:p,href:x("assets.edit",{assetId:e.ASSETID,assetNo:e.ASSETNO}),children:"Update"},"update"),s.jsx(_,{className:"text-danger",color:"danger",onPress:()=>{O(""),b(""),I(""),K()},children:"Dispose"},"dispose")]})]})})]},e.ASSETNO)})})]}),s.jsx(f,{isOpen:W,onClose:T,children:s.jsxs(S,{children:[s.jsx(E,{children:"Asset Details"}),s.jsx(N,{children:a&&s.jsxs("div",{className:"flex flex-wrap gap-6",children:[a.IMAGEPATH&&s.jsx(ls,{spaceBetween:10,slidesPerView:1,className:"w-full sm:w-1/2 lg:w-1/3",children:JSON.parse(a.IMAGEPATH).map((e,l)=>s.jsx(os,{children:s.jsx("img",{src:`/storage/${e}`,alt:`Asset Image ${l+1}`,className:"object-cover w-full h-48 rounded-lg",onError:i=>i.target.src="/assets/placeholder.jpg"})},l))}),s.jsxs("div",{className:"flex-1 space-y-4 text-sm text-gray-700",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Description:"})," ",a.DESCRIPTION]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Serial Number:"})," ",a.SERIALNO]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Date Issued:"})," ",((R=a.DATEISSUUED)==null?void 0:R.trim())??"--"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Location:"})," ",a.location.LOCATIONNAME]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Condition:"})," ",a.CONDITIONS??"--"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Last Audit:"})," ",(V=(U=a==null?void 0:a.latest_scan)==null?void 0:U.changes)!=null&&V.scanned_at?new Date(a.latest_scan.changes.scanned_at).toLocaleString():"--"]}),s.jsx(o,{color:"primary",variant:"light",onPress:()=>{ss()},children:"View components"})]})]})}),s.jsx(A,{children:s.jsx(o,{color:"primary",onPress:T,children:"Close"})})]})}),s.jsx(f,{size:"3xl",isOpen:Z,onClose:v,children:s.jsxs(S,{children:[s.jsx(E,{className:"flex flex-col gap-1",children:"Components"}),s.jsx(N,{children:s.jsxs(B,{"aria-label":"Components Table",children:[s.jsxs(q,{children:[s.jsx(n,{children:"Component #"}),s.jsx(n,{children:"Component Name"}),s.jsx(n,{children:"Description"}),s.jsx(n,{children:"System Component ID"})]}),s.jsx(G,{emptyContent:"No components to display.",children:((a==null?void 0:a.component_details)||[]).map((e,l)=>{var i;return s.jsxs(k,{children:[s.jsx(t,{children:e.COMPONENTNUMBER}),s.jsx(t,{children:((i=e.asset_component)==null?void 0:i.ASSETCOMPONENTNAME)??"--"}),s.jsx(t,{children:e.COMPONENTDESCRIPTION??"--"}),s.jsx(t,{children:e.SYSTEMCOMPONENTID})]},l)})})]})}),s.jsx(A,{children:s.jsx(o,{color:"danger",variant:"light",onPress:v,children:"Close"})})]})}),s.jsx(f,{isOpen:J,onClose:d,onOpenChange:d,children:s.jsxs(S,{children:[s.jsx(E,{className:"text-danger-500",children:"Are you sure you want to dispose this asset?"}),s.jsxs(N,{children:[s.jsx(xs,{isRequired:!0,label:"Reason for disposal",value:g,onChange:e=>O(e.target.value)}),s.jsx($,{variant:"faded",isRequired:!0,label:"Asset Status",value:C,onChange:e=>b(e.target.value)}),s.jsx($,{variant:"faded",isRequired:!0,label:"Asset Condition",value:D,onChange:e=>I(e.target.value)})]}),s.jsxs(A,{children:[s.jsx(o,{color:"warning",onPress:()=>es(r.asset_details[0].ASSETID,r.asset_details[0].ASSETNO,g,C,D),children:"Confirm"}),s.jsx(o,{color:"danger",variant:"light",onPress:d,children:"Close"})]})]})})]})]})}export{ws as default};
