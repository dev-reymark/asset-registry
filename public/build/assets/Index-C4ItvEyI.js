import{K as M,r as j,j as e,L as C,$ as i,S as m,V as o}from"./app-pkRCDXMr.js";import{A as S}from"./Authenticated-CdBBHsWP.js";import{G as w,s as r}from"./index-Chv6CjBU.js";import{C as P}from"./index-DsQrrd0i.js";import{u as O}from"./useDebounce-Df-EQp8s.js";import{T}from"./index--1FKBNdl.js";import{b as t}from"./chunk-KCYYJJH4-DxHcy4GM.js";import{t as I,a as L,b as n,c as z,d as D,e as d}from"./chunk-F3UDT23P-BVt_nMau.js";import{i as Y}from"./chunk-5CAICSBD-CSisO7OH.js";import"./index-0-18Hqup.js";import"./index-CPerPcla.js";import"./chunk-SLABUSGS-DZJMNFeU.js";import"./index-OYY1JW1G.js";import"./LiveAnnouncer-DAy23sjL.js";function H(h){return w({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M2.75 2h18.5c.966 0 1.75.784 1.75 1.75v3.5A1.75 1.75 0 0 1 21.25 9H2.75A1.75 1.75 0 0 1 1 7.25v-3.5C1 2.784 1.784 2 2.75 2Zm18.5 1.5H2.75a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h18.5a.25.25 0 0 0 .25-.25v-3.5a.25.25 0 0 0-.25-.25ZM2.75 10a.75.75 0 0 1 .75.75v9.5c0 .138.112.25.25.25h16.5a.25.25 0 0 0 .25-.25v-9.5a.75.75 0 0 1 1.5 0v9.5A1.75 1.75 0 0 1 20.25 22H3.75A1.75 1.75 0 0 1 2 20.25v-9.5a.75.75 0 0 1 .75-.75Z"},child:[]},{tag:"path",attr:{d:"M9.75 11.5a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-4.5Z"},child:[]}]})(h)}function ee(){const{employees:h,title:v,filters:p}=M().props,[x,u]=j.useState(p.search||""),[c,E]=j.useState(p.sort||""),N=O(s=>{m.get(r("employees.index"),{search:s,sort:c},{preserveState:!0,replace:!0})},300),b=s=>{const a=s.target.value;u(a),N(a)},y=()=>{u(""),m.get(r("employees.index"),{search:"",sort:c})},A=()=>{const s=c==="name_asc"?"name_desc":"name_asc";E(s),m.get(r("employees.index"),{search:x,sort:s},{preserveState:!0,replace:!0})},_=(s,a)=>{const l="archive-confirmation";o.dismiss(l),o(f=>e.jsxs("span",{className:"flex flex-col gap-2",children:[e.jsxs("span",{children:["Are you sure you want to archive ",e.jsx("b",{children:a}),"?"]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(t,{onPress:()=>{o.dismiss(f.id),g(s)},color:"primary",children:"Yes"}),e.jsx(t,{color:"danger",variant:"flat",onPress:()=>{o.dismiss(f.id)},children:"Cancel"})]})]}),{id:l,duration:1e4})},g=async s=>{try{await o.promise(axios.post(r("employees.archive",{employee:s}),{_method:"PATCH"}),{loading:"Archiving employee...",success:e.jsx("b",{children:"Employee archived successfully!"}),error:e.jsx("b",{children:"Failed to archive employee."})},{duration:5e3,success:{duration:5e3},error:{duration:5e3}}),m.reload()}catch(a){console.error("Error archiving employee:",a)}};return e.jsxs(S,{children:[e.jsx(C,{title:"Employees"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:v}),e.jsx(t,{as:i,href:r("employees.archived"),color:"warning",variant:"flat",startContent:e.jsx(H,{className:"size-5"}),children:"Archived Employees"})]}),e.jsxs(I,{isVirtualized:!0,"aria-label":"Employee Table",className:"mt-4",isStriped:!0,topContent:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{as:i,href:r("employees.create"),color:"primary",children:"Add Employee"}),e.jsx(t,{as:i,href:r("assets.showForm"),color:"success",variant:"flat",startContent:e.jsx(T,{className:"size-6"}),children:"Import Data"})]}),e.jsx(Y,{isClearable:!0,className:"w-full sm:max-w-[44%]",placeholder:"Search...",startContent:e.jsx(P,{className:"size-5"}),value:x,onClear:y,onChange:b})]}),children:[e.jsxs(L,{children:[e.jsx(n,{children:"EMPLOYEE ID"}),e.jsxs(n,{onClick:A,className:"cursor-pointer select-none",children:["EMPLOYEE NAME",c==="name_asc"&&" ðŸ”¼",c==="name_desc"&&" ðŸ”½",!["name_asc","name_desc"].includes(c)&&" âºï¸"]}),e.jsx(n,{children:"DEPARTMENT"}),e.jsx(n,{children:"LOCATION"}),e.jsx(n,{children:"ACTIONS"})]}),e.jsx(z,{emptyContent:"No rows to display.",children:h.map(s=>{var a,l;return e.jsxs(D,{children:[e.jsx(d,{children:s.EMPLOYEEID||"--"}),e.jsx(d,{children:s.EMPLOYEENAME}),e.jsx(d,{children:(a=s.department)==null?void 0:a.DEPARTMENTNAME}),e.jsx(d,{children:(l=s.location)==null?void 0:l.LOCATIONNAME}),e.jsxs(d,{className:"flex gap-1",children:[e.jsx(t,{className:"w-full",size:"sm",color:"primary",variant:"flat",as:i,href:`/assets/${s.EMPNO}`,children:"Assets"}),e.jsx(t,{className:"w-full",size:"sm",color:"success",variant:"flat",as:i,href:r("employees.edit",s.EMPNO),children:"Update"}),e.jsx(t,{className:"w-full",size:"sm",variant:"flat",color:"warning",onPress:()=>_(s.EMPNO,s.EMPLOYEENAME),children:"Archive"})]})]},s.EMPNO)})})]})]})]})}export{ee as default};
