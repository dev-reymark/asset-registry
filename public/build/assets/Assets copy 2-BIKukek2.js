import{K as le,r as n,j as e,L as ne,S as m}from"./app-DhJ3Rndo.js";import{A as ie}from"./Authenticated-DCppopgg.js";import{u as de}from"./useDebounce-B4TbwLI_.js";import{C as ce,a as oe,b as I}from"./index-CFHwLyeV.js";import{s as S}from"./index-CxtW7q5J.js";import{i as A}from"./chunk-5CAICSBD-DOl_A7pi.js";import{d as he,a as xe,b as ue,m as je}from"./chunk-Z2IJA2C6-VzWmdSPa.js";import{b as o}from"./chunk-KCYYJJH4-Dm19h-2m.js";import{t as pe,a as me,b as a,c as Se,d as fe,e as r}from"./chunk-F3UDT23P-DLE-oiDN.js";import"./index-x42ZTnEH.js";import"./chunk-SLABUSGS-J5lLvYsm.js";import"./useMenuTriggerState-B5cIOEVz.js";import"./index-DHe9H3CP.js";import"./LiveAnnouncer-BRxpJmgD.js";function Fe(){const{assets:v,title:y,desc:f,filters:i={},descriptions:C,statuses:_,issuedTos:O}=le().props,[h,c]=n.useState(i.search||""),[d,b]=n.useState(i.sort||""),[x,j]=n.useState(i.start_date||""),[u,p]=n.useState(i.end_date||""),[E,N]=n.useState(i.description||""),[g,T]=n.useState(i.status||""),[t,Q]=n.useState(i.issued_to||""),[V,be]=n.useState(i.sort_field||""),[X,Ee]=n.useState(i.sort_direction||""),D=(s,l)=>{m.get(S("assets.index"),{search:h,sort:d,start_date:s,end_date:l},{preserveState:!0,replace:!0})},Z=s=>{const l=s.target.value;j(l),D(l,u)},$=s=>{const l=s.target.value;p(l),D(x,l)},ee=de(s=>{m.get(S("assets.index"),{search:s,sort:d},{preserveState:!0,replace:!0})},300),se=s=>{const l=s.target.value;c(l),ee(l)},te=()=>{c(""),m.get(S("assets.index"),{search:"",sort:d})},ae=()=>{const s=d==="name_asc"?"name_desc":"name_asc";b(s),m.get(S("assets.index"),{search:h,sort:s},{preserveState:!0,replace:!0})},re=s=>{m.get(S("assets.index"),{search:h,sortField:V,sortDirection:X,start_date:x,end_date:u,description:E,status:g,issued_to:t,...s},{preserveState:!0,replace:!0})};return e.jsxs(ie,{children:[e.jsx(ne,{title:"Employee Assets"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:y}),e.jsx("p",{className:"text-gray-600 mb-4",children:f}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx(A,{isClearable:!0,className:"w-full sm:max-w-[44%]",placeholder:"Search...",startContent:e.jsx(ce,{className:"size-5"}),value:h,onClear:te,onChange:se}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_e,{statuses:_,status:g,setStatus:T,descriptions:C,description:E,setDescription:N,issuedTos:O,issuedTo:t,applyFilters:re,setIssuedTo:Q}),e.jsxs(he,{children:[e.jsx(xe,{children:e.jsx(o,{variant:"bordered",children:"Filter by Date Issued"})}),e.jsx(ue,{"aria-label":"Filter by Date Issued",className:"p-2 w-72",closeOnSelect:!1,children:e.jsx(je,{className:"cursor-default",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(A,{type:"date",label:"Start Date",value:x,onChange:Z}),e.jsx(A,{type:"date",label:"End Date",value:u,onChange:$}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx(o,{color:"primary",onPress:()=>D(x,u),children:"Apply"}),e.jsx(o,{color:"warning",variant:"flat",onPress:()=>{j(""),p(""),D("","")},children:"Clear"})]})]})},"filter")})]})]})]}),e.jsxs(pe,{"aria-label":"Employee Assets table",isStriped:!0,children:[e.jsxs(me,{children:[e.jsx(a,{children:"ASSET ID"}),e.jsx(a,{children:"EMPLOYEE ID"}),e.jsxs(a,{onClick:ae,style:{cursor:"pointer"},children:["EMPLOYEE NAME",d==="name_asc"&&" 🔼",d==="name_desc"&&" 🔽",!["name_asc","name_desc"].includes(d)&&" ⏺️"]}),e.jsx(a,{children:"Department"}),e.jsx(a,{children:"Asset Location"}),e.jsx(a,{children:"System Asset ID"}),e.jsx(a,{children:"Description"}),e.jsx(a,{children:"Model"}),e.jsx(a,{children:"Serial No"}),e.jsx(a,{children:"Serial Type"}),e.jsx(a,{children:"Issued To"}),e.jsx(a,{children:"Date Issued"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Condition"}),e.jsx(a,{children:"Asset From"}),e.jsx(a,{children:"Type/Size"}),e.jsx(a,{children:"With Components"}),e.jsx(a,{children:"Components"})]}),e.jsx(Se,{emptyContent:"No rows to display.",children:v.map(s=>{var l,w,P,M,L,k,F,z,Y,R,U,W,H,K,q,B,G,J;return e.jsxs(fe,{children:[e.jsx(r,{children:s.ASSETSID}),e.jsx(r,{children:((l=s==null?void 0:s.employee)==null?void 0:l.EMPLOYEEID)||"--"}),e.jsx(r,{children:s.EMPLOYEENAME}),e.jsx(r,{children:(P=(w=s==null?void 0:s.employee)==null?void 0:w.department)==null?void 0:P.DEPARTMENTNAME}),e.jsx(r,{children:(L=(M=s==null?void 0:s.employee)==null?void 0:M.location)==null?void 0:L.LOCATIONNAME}),e.jsx(r,{children:(k=s.asset_details[0])==null?void 0:k.SYSTEMASSETID}),e.jsx(r,{children:(F=s.asset_details[0])==null?void 0:F.DESCRIPTION}),e.jsx(r,{children:(z=s.asset_details[0])==null?void 0:z.MODEL}),e.jsx(r,{children:(Y=s.asset_details[0])==null?void 0:Y.SERIALNO}),e.jsx(r,{children:(R=s.asset_details[0])==null?void 0:R.SERIALTYPE}),e.jsx(r,{children:(U=s.asset_details[0])==null?void 0:U.ISSUEDTO}),e.jsx(r,{children:(W=s.asset_details[0])==null?void 0:W.DATEISSUED}),e.jsx(r,{children:(H=s.asset_details[0])==null?void 0:H.STATUS}),e.jsx(r,{children:(K=s.asset_details[0])==null?void 0:K.CONDITION}),e.jsx(r,{children:(q=s.asset_details[0])==null?void 0:q.ASSETFROM}),e.jsx(r,{children:(B=s.asset_details[0])==null?void 0:B.TYPE}),e.jsx(r,{children:(G=s.asset_details[0])==null?void 0:G.WITHCOMPONENTS}),e.jsx(r,{children:(J=s.asset_details[0])==null?void 0:J.COMPONENTS})]},s.ASSETSID)})})]})]})]})}const _e=({statuses:v,status:y,setStatus:f,descriptions:i,description:C,setDescription:_,issuedTos:O,issuedTo:h,applyFilters:c,setIssuedTo:d})=>{const[b,x]=n.useState(!1),[j,u]=n.useState(!1),[p,E]=n.useState(!1),[N,g]=n.useState(!1),T=()=>{x(!b)};return e.jsxs("div",{className:"relative",children:[e.jsx(o,{color:"primary",isIconOnly:!0,variant:"flat",onPress:T,children:e.jsx(oe,{className:"size-5"})}),b&&e.jsx("div",{className:"absolute top-12 bg-white border p-4 w-60 shadow-lg z-50",children:e.jsxs("form",{children:[e.jsxs("fieldset",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("legend",{children:"Status"}),e.jsx(o,{variant:"light",onPress:()=>u(!j),isIconOnly:!0,children:e.jsx(I,{className:"size-5"})})]}),j&&(v||[]).map(t=>e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:y===t,onChange:()=>{f(t),c({status:t})}}),t]})},t))]}),e.jsxs("fieldset",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("legend",{children:"Description"}),e.jsx(o,{variant:"light",onPress:()=>E(!p),isIconOnly:!0,children:e.jsx(I,{className:"size-5"})})]}),p&&(i||[]).map(t=>e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:C===t,onChange:()=>{_(t),c({description:t})}}),t]})},t))]}),e.jsxs("fieldset",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("legend",{children:"Issued To"}),e.jsx(o,{variant:"light",onPress:()=>g(!N),isIconOnly:!0,children:e.jsx(I,{className:"size-5"})})]}),N&&(O||[]).map(t=>e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:h===t,onChange:()=>{d(t),c({issued_to:t})}}),t]})},t))]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{type:"button",className:"text-red-500",onClick:()=>{d(""),_(""),f(""),c({issued_to:"",description:"",status:""})},children:"Clear Filters"})})]})})]})};export{Fe as default};
