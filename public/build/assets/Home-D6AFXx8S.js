import{r as n,j as e,$ as m,V as d,S as x}from"./app-Ccb7qOV4.js";import{A as f,s as u,I as p,a as h}from"./index-CmeuVHow.js";import{a as j}from"./index-CtHudCBV.js";import{H as g,c}from"./html5-qrcode-scanner-vBTMfFcO.js";import{i as b}from"./chunk-3TCFMHK3-BI2ajXwh.js";import{b as y}from"./chunk-KCYYJJH4-s4EirL7v.js";import"./index-0-18Hqup.js";import"./index-B1SFeY3m.js";const w=()=>{const[o,a]=n.useState(null),l=n.useRef(null),i="https://172.16.13.215";return n.useEffect(()=>(l.current=new g("reader",{fps:10,qrbox:250}),l.current.render(s=>{a(s);try{const t=new URL(s),r=`${i}${t.pathname}${t.search}${t.hash}`;window.location.href=r}catch(t){console.error("Invalid URL scanned:",t)}},s=>{console.error("QR scanning error:",s)}),()=>{l.current&&l.current.clear()}),[]),e.jsx("div",{children:o?e.jsx("p",{children:"Redirecting..."}):e.jsx("div",{id:"reader",style:{width:"100%"}})})};function L(){const[o,a]=n.useState(!1),l=async()=>{a(!0);try{const s=await axios.get(u("assets.export"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([s.data])),r=document.createElement("a");r.href=t,r.setAttribute("download","DSC_Assets_Registry_Information.xlsx"),document.body.appendChild(r),r.click(),document.body.removeChild(r),d.success("Assets exported successfully")}catch{d.error("Failed to export assets")}finally{a(!1)}},i=()=>{x.post("/logout"),x.visit("/login"),localStorage.removeItem("token"),d.success("Logged out successfully")};return e.jsxs("div",{className:"bg-gray-200 min-h-screen w-full flex flex-col items-center justify-center p-4",children:[e.jsxs("div",{className:"flex mb-8 text-center justify-center items-center flex-col",children:[e.jsx(f,{className:"w-24 h-24 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Asset Registry Information"})]}),e.jsxs("div",{className:"max-w-3xl gap-4 grid grid-cols-12 grid-rows-2 px-4 w-full",children:[e.jsxs(c,{isFooterBlurred:!0,isPressable:!0,className:"w-full h-[300px] col-span-12 sm:col-span-7 flex flex-col justify-center items-center",children:[e.jsx(b,{removeWrapper:!0,alt:"Card background",className:"absolute inset-0 z-0 w-full h-full object-cover",src:"/assets/QR.gif"}),e.jsx("div",{className:"relative z-10 w-full h-full flex justify-center items-center bg-white bg-opacity-80 p-4",children:e.jsx(w,{})})]}),e.jsx(c,{isPressable:!0,as:y,isLoading:o,onPress:l,className:"w-full h-[230px] col-span-12 sm:col-span-5 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"p-4 flex flex-col justify-center items-center gap-3 text-center",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-neutral-200",children:"EXPORT ASSETS"}),e.jsx("div",{className:"flex justify-center items-center size-14 bg-blue-600 text-white rounded-full dark:bg-blue-900 dark:text-blue-200",children:e.jsx(j,{className:"text-3xl"})})]})}),e.jsx(c,{as:m,href:u("assets.index"),isFooterBlurred:!0,isPressable:!0,className:"w-full h-[200px] col-span-12 sm:col-span-5 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"p-4 flex flex-col justify-center items-center gap-3 text-center",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-neutral-200",children:"VIEW ASSETS"}),e.jsx("div",{className:"flex justify-center items-center size-14 bg-blue-600 text-white rounded-full dark:bg-blue-900 dark:text-blue-200",children:e.jsx(p,{className:"w-10 h-10"})})]})}),e.jsx(c,{onPress:i,isFooterBlurred:!0,isPressable:!0,className:"bg-danger-50 w-full h-[200px] col-span-12 sm:col-span-5 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"p-4 flex flex-col justify-center items-center gap-3 text-center",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-800 dark:text-neutral-200",children:"SIGN OUT"}),e.jsx("div",{className:"flex justify-center items-center size-14 bg-danger-600 text-white rounded-full dark:bg-blue-900 dark:text-blue-200",children:e.jsx(h,{className:"w-10 h-10"})})]})})]})]})}export{L as default};
