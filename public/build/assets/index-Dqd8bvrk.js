import{r as d,ac as V,ad as L,R as $,d as U,Y as H,j as R,ae as q}from"./app-CMpdZ-fk.js";import{$ as Y}from"./chunk-SLABUSGS-CABNBQWk.js";let G=0;const M=new Map;function ve(n){let[s,e]=d.useState();return V(()=>{if(!n)return;let t=M.get(n);if(t)e(t.element.id);else{let l=`react-aria-description-${G++}`;e(l);let i=document.createElement("div");i.id=l,i.style.display="none",i.textContent=n,document.body.appendChild(i),t={refCount:0,element:i},M.set(n,t)}return t.refCount++,()=>{t&&--t.refCount===0&&(t.element.remove(),M.delete(n))}},[n]),{"aria-describedby":n?s:void 0}}let C=new Map;function pe(n){let{locale:s}=L(),e=s+(n?Object.entries(n).sort((l,i)=>l[0]<i[0]?-1:1).join():"");if(C.has(e))return C.get(e);let t=new Intl.Collator(s,n);return C.set(e,t),t}const k={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function J(n={}){let{style:s,isFocusable:e}=n,[t,l]=d.useState(!1),{focusWithinProps:i}=H({isDisabled:!e,onFocusWithinChange:r=>l(r)}),o=d.useMemo(()=>t?s:s?{...k,...s}:k,[t]);return{visuallyHiddenProps:{...i,style:o}}}function be(n){let{children:s,elementType:e="div",isFocusable:t,style:l,...i}=n,{visuallyHiddenProps:o}=J(n);return $.createElement(e,U(i,o),s)}var Se=({strokeWidth:n=1.5,...s})=>R.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:n,viewBox:"0 0 24 24",width:"1em",...s,children:R.jsx("path",{d:"m6 9 6 6 6-6"})});class w extends Set{constructor(s,e,t){super(s),s instanceof w?(this.anchorKey=e??s.anchorKey,this.currentKey=t??s.currentKey):(this.anchorKey=e??null,this.currentKey=t??null)}}function Q(n,s){if(n.size!==s.size)return!1;for(let e of n)if(!s.has(e))return!1;return!0}function we(n){let{selectionMode:s="none",disallowEmptySelection:e=!1,allowDuplicateSelectionEvents:t,selectionBehavior:l="toggle",disabledBehavior:i="all"}=n,o=d.useRef(!1),[,r]=d.useState(!1),c=d.useRef(null),f=d.useRef(null),[,a]=d.useState(null),b=d.useMemo(()=>A(n.selectedKeys),[n.selectedKeys]),p=d.useMemo(()=>A(n.defaultSelectedKeys,new w),[n.defaultSelectedKeys]),[m,v]=Y(b,p,n.onSelectionChange),S=d.useMemo(()=>n.disabledKeys?new Set(n.disabledKeys):new Set,[n.disabledKeys]),[u,h]=d.useState(l);l==="replace"&&u==="toggle"&&typeof m=="object"&&m.size===0&&h("replace");let y=d.useRef(l);return d.useEffect(()=>{l!==y.current&&(h(l),y.current=l)},[l]),{selectionMode:s,disallowEmptySelection:e,selectionBehavior:u,setSelectionBehavior:h,get isFocused(){return o.current},setFocused(g){o.current=g,r(g)},get focusedKey(){return c.current},get childFocusStrategy(){return f.current},setFocusedKey(g,x="first"){c.current=g,f.current=x,a(g)},selectedKeys:m,setSelectedKeys(g){(t||!Q(g,m))&&v(g)},disabledKeys:S,disabledBehavior:i}}function A(n,s){return n?n==="all"?"all":new w(n):s}class X{build(s,e){return this.context=e,D(()=>this.iterateCollection(s))}*iterateCollection(s){let{children:e,items:t}=s;if($.isValidElement(e)&&e.type===$.Fragment)yield*this.iterateCollection({children:e.props.children,items:t});else if(typeof e=="function"){if(!t)throw new Error("props.children was a function but props.items is missing");let l=0;for(let i of t)yield*this.getFullNode({value:i,index:l},{renderer:e}),l++}else{let l=[];$.Children.forEach(e,o=>{o&&l.push(o)});let i=0;for(let o of l){let r=this.getFullNode({element:o,index:i},{});for(let c of r)i++,yield c}}}getKey(s,e,t,l){if(s.key!=null)return s.key;if(e.type==="cell"&&e.key!=null)return`${l}${e.key}`;let i=e.value;if(i!=null){var o;let r=(o=i.key)!==null&&o!==void 0?o:i.id;if(r==null)throw new Error("No key found for item");return r}return l?`${l}.${e.index}`:`$.${e.index}`}getChildState(s,e){return{renderer:e.renderer||s.renderer}}*getFullNode(s,e,t,l){if($.isValidElement(s.element)&&s.element.type===$.Fragment){let u=[];$.Children.forEach(s.element.props.children,y=>{u.push(y)});var i;let h=(i=s.index)!==null&&i!==void 0?i:0;for(const y of u)yield*this.getFullNode({element:y,index:h++},e,t,l);return}let o=s.element;if(!o&&s.value&&e&&e.renderer){let u=this.cache.get(s.value);if(u&&(!u.shouldInvalidate||!u.shouldInvalidate(this.context))){u.index=s.index,u.parentKey=l?l.key:null,yield u;return}o=e.renderer(s.value)}if($.isValidElement(o)){let u=o.type;if(typeof u!="function"&&typeof u.getCollectionNode!="function"){let x=o.type;throw new Error(`Unknown element <${x}> in collection.`)}let h=u.getCollectionNode(o.props,this.context);var r;let y=(r=s.index)!==null&&r!==void 0?r:0,g=h.next();for(;!g.done&&g.value;){let x=g.value;s.index=y;var c;let E=(c=x.key)!==null&&c!==void 0?c:null;E==null&&(E=x.element?null:this.getKey(o,s,e,t));let T=[...this.getFullNode({...x,key:E,index:y,wrapper:Z(s.wrapper,x.wrapper)},this.getChildState(e,x),t?`${t}${o.key}`:o.key,l)];for(let I of T){var f,a;I.value=(a=(f=x.value)!==null&&f!==void 0?f:s.value)!==null&&a!==void 0?a:null,I.value&&this.cache.set(I.value,I);var b;if(s.type&&I.type!==s.type)throw new Error(`Unsupported type <${z(I.type)}> in <${z((b=l==null?void 0:l.type)!==null&&b!==void 0?b:"unknown parent type")}>. Only <${z(s.type)}> is supported.`);y++,yield I}g=h.next(T)}return}if(s.key==null||s.type==null)return;let p=this;var m,v;let S={type:s.type,props:s.props,key:s.key,parentKey:l?l.key:null,value:(m=s.value)!==null&&m!==void 0?m:null,level:l?l.level+1:0,index:s.index,rendered:s.rendered,textValue:(v=s.textValue)!==null&&v!==void 0?v:"","aria-label":s["aria-label"],wrapper:s.wrapper,shouldInvalidate:s.shouldInvalidate,hasChildNodes:s.hasChildNodes||!1,childNodes:D(function*(){if(!s.hasChildNodes||!s.childNodes)return;let u=0;for(let h of s.childNodes()){h.key!=null&&(h.key=`${S.key}${h.key}`);let y=p.getFullNode({...h,index:u},p.getChildState(e,h),S.key,S);for(let g of y)u++,yield g}})};yield S}constructor(){this.cache=new WeakMap}}function D(n){let s=[],e=null;return{*[Symbol.iterator](){for(let t of s)yield t;e||(e=n());for(let t of e)s.push(t),yield t}}}function Z(n,s){if(n&&s)return e=>n(s(e));if(n)return n;if(s)return s}function z(n){return n[0].toUpperCase()+n.slice(1)}function xe(n,s,e){let t=d.useMemo(()=>new X,[]),{children:l,items:i,collection:o}=n;return d.useMemo(()=>{if(o)return o;let c=t.build({children:l,items:i},e);return s(c)},[t,l,i,o,e,s])}function N(n,s){return typeof s.getChildren=="function"?s.getChildren(n.key):n.childNodes}function ee(n){return te(n,0)}function te(n,s){if(s<0)return;let e=0;for(let t of n){if(e===s)return t;e++}}function $e(n){let s;for(let e of n)s=e;return s}function O(n,s,e){if(s.parentKey===e.parentKey)return s.index-e.index;let t=[...B(n,s),s],l=[...B(n,e),e],i=t.slice(0,l.length).findIndex((o,r)=>o!==l[r]);return i!==-1?(s=t[i],e=l[i],s.index-e.index):t.findIndex(o=>o===e)>=0?1:(l.findIndex(o=>o===s)>=0,-1)}function B(n,s){let e=[],t=s;for(;(t==null?void 0:t.parentKey)!=null;)t=n.getItem(t.parentKey),t&&e.unshift(t);return e}class j{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(s){this.state.setSelectionBehavior(s)}get isFocused(){return this.state.isFocused}setFocused(s){this.state.setFocused(s)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(s,e){(s==null||this.collection.getItem(s))&&this.state.setFocusedKey(s,e)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(s){if(this.state.selectionMode==="none")return!1;let e=this.getKey(s);return e==null?!1:this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e)}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let s=this.getSelectAllKeys(),e=this.state.selectedKeys;return this._isSelectAll=s.every(t=>e.has(t)),this._isSelectAll}get firstSelectedKey(){let s=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!s||l&&O(this.collection,l,s)<0)&&(s=l)}var e;return(e=s==null?void 0:s.key)!==null&&e!==void 0?e:null}get lastSelectedKey(){let s=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!s||l&&O(this.collection,l,s)>0)&&(s=l)}var e;return(e=s==null?void 0:s.key)!==null&&e!==void 0?e:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(s){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(s);return}let e=this.getKey(s);if(e==null)return;let t;if(this.state.selectedKeys==="all")t=new w([e],e,e);else{let o=this.state.selectedKeys;var l;let r=(l=o.anchorKey)!==null&&l!==void 0?l:e;t=new w(o,r,e);var i;for(let c of this.getKeyRange(r,(i=o.currentKey)!==null&&i!==void 0?i:e))t.delete(c);for(let c of this.getKeyRange(e,r))this.canSelectItem(c)&&t.add(c)}this.state.setSelectedKeys(t)}getKeyRange(s,e){let t=this.collection.getItem(s),l=this.collection.getItem(e);return t&&l?O(this.collection,t,l)<=0?this.getKeyRangeInternal(s,e):this.getKeyRangeInternal(e,s):[]}getKeyRangeInternal(s,e){var t;if(!((t=this.layoutDelegate)===null||t===void 0)&&t.getKeyRange)return this.layoutDelegate.getKeyRange(s,e);let l=[],i=s;for(;i!=null;){let o=this.collection.getItem(i);if(o&&(o.type==="item"||o.type==="cell"&&this.allowsCellSelection)&&l.push(i),i===e)return l;i=this.collection.getKeyAfter(i)}return[]}getKey(s){let e=this.collection.getItem(s);if(!e||e.type==="cell"&&this.allowsCellSelection)return s;for(;e&&e.type!=="item"&&e.parentKey!=null;)e=this.collection.getItem(e.parentKey);return!e||e.type!=="item"?null:e.key}toggleSelection(s){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(s)){this.replaceSelection(s);return}let e=this.getKey(s);if(e==null)return;let t=new w(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(s){if(this.selectionMode==="none")return;let e=this.getKey(s);if(e==null)return;let t=this.canSelectItem(e)?new w([e],e,e):new w;this.state.setSelectedKeys(t)}setSelectedKeys(s){if(this.selectionMode==="none")return;let e=new w;for(let t of s){let l=this.getKey(t);if(l!=null&&(e.add(l),this.selectionMode==="single"))break}this.state.setSelectedKeys(e)}getSelectAllKeys(){let s=[],e=t=>{for(;t!=null;){if(this.canSelectItem(t)){var l;let o=this.collection.getItem(t);(o==null?void 0:o.type)==="item"&&s.push(t);var i;o!=null&&o.hasChildNodes&&(this.allowsCellSelection||o.type!=="item")&&e((i=(l=ee(N(o,this.collection)))===null||l===void 0?void 0:l.key)!==null&&i!==void 0?i:null)}t=this.collection.getKeyAfter(t)}};return e(this.collection.getFirstKey()),s}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new w)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(s,e){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(s)&&!this.disallowEmptySelection?this.toggleSelection(s):this.replaceSelection(s):this.selectionBehavior==="toggle"||e&&(e.pointerType==="touch"||e.pointerType==="virtual")?this.toggleSelection(s):this.replaceSelection(s))}isSelectionEqual(s){if(s===this.state.selectedKeys)return!0;let e=this.selectedKeys;if(s.size!==e.size)return!1;for(let t of s)if(!e.has(t))return!1;for(let t of e)if(!s.has(t))return!1;return!0}canSelectItem(s){var e;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(s))return!1;let t=this.collection.getItem(s);return!(!t||!(t==null||(e=t.props)===null||e===void 0)&&e.isDisabled||t.type==="cell"&&!this.allowsCellSelection)}isDisabled(s){var e,t;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(s)||!!(!((t=this.collection.getItem(s))===null||t===void 0||(e=t.props)===null||e===void 0)&&e.isDisabled))}isLink(s){var e,t;return!!(!((t=this.collection.getItem(s))===null||t===void 0||(e=t.props)===null||e===void 0)&&e.href)}getItemProps(s){var e;return(e=this.collection.getItem(s))===null||e===void 0?void 0:e.props}withCollection(s){return new j(s,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(s,e,t){this.collection=s,this.state=e;var l;this.allowsCellSelection=(l=t==null?void 0:t.allowsCellSelection)!==null&&l!==void 0?l:!1,this._isSelectAll=null,this.layoutDelegate=(t==null?void 0:t.layoutDelegate)||null}}function K(n,s,e){let t=e.initialDeps??[],l;return()=>{var i,o,r,c;let f;e.key&&((i=e.debug)!=null&&i.call(e))&&(f=Date.now());const a=n();if(!(a.length!==t.length||a.some((m,v)=>t[v]!==m)))return l;t=a;let p;if(e.key&&((o=e.debug)!=null&&o.call(e))&&(p=Date.now()),l=s(...a),e.key&&((r=e.debug)!=null&&r.call(e))){const m=Math.round((Date.now()-f)*100)/100,v=Math.round((Date.now()-p)*100)/100,S=v/16,u=(h,y)=>{for(h=String(h);h.length<y;)h=" "+h;return h};console.info(`%câ± ${u(v,5)} /${u(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*S,120))}deg 100% 31%);`,e==null?void 0:e.key)}return(c=e==null?void 0:e.onChange)==null||c.call(e,l),l}}function F(n,s){if(n===void 0)throw new Error("Unexpected undefined");return n}const se=(n,s)=>Math.abs(n-s)<1,le=(n,s,e)=>{let t;return function(...l){n.clearTimeout(t),t=n.setTimeout(()=>s.apply(this,l),e)}},ie=n=>n,ne=n=>{const s=Math.max(n.startIndex-n.overscan,0),e=Math.min(n.endIndex+n.overscan,n.count-1),t=[];for(let l=s;l<=e;l++)t.push(l);return t},oe=(n,s)=>{const e=n.scrollElement;if(!e)return;const t=n.targetWindow;if(!t)return;const l=o=>{const{width:r,height:c}=o;s({width:Math.round(r),height:Math.round(c)})};if(l(e.getBoundingClientRect()),!t.ResizeObserver)return()=>{};const i=new t.ResizeObserver(o=>{const r=o[0];if(r!=null&&r.borderBoxSize){const c=r.borderBoxSize[0];if(c){l({width:c.inlineSize,height:c.blockSize});return}}l(e.getBoundingClientRect())});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},P={passive:!0},re=typeof window>"u"?!0:"onscrollend"in window,ce=(n,s)=>{const e=n.scrollElement;if(!e)return;const t=n.targetWindow;if(!t)return;let l=0;const i=n.options.useScrollendEvent&&re?()=>{}:le(t,()=>{s(l,!1)},n.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:a,isRtl:b}=n.options;l=a?e.scrollLeft*(b&&-1||1):e.scrollTop,i(),s(l,f)},r=o(!0),c=o(!1);return c(),e.addEventListener("scroll",r,P),e.addEventListener("scrollend",c,P),()=>{e.removeEventListener("scroll",r),e.removeEventListener("scrollend",c)}},ae=(n,s,e)=>{if(s!=null&&s.borderBoxSize){const t=s.borderBoxSize[0];if(t)return Math.round(t[e.options.horizontal?"inlineSize":"blockSize"])}return Math.round(n.getBoundingClientRect()[e.options.horizontal?"width":"height"])},ue=(n,{adjustments:s=0,behavior:e},t)=>{var l,i;const o=n+s;(i=(l=t.scrollElement)==null?void 0:l.scrollTo)==null||i.call(l,{[t.options.horizontal?"left":"top"]:o,behavior:e})};class he{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(l=>{l.forEach(i=>{this._measureElement(i.target,i)})}));return{disconnect:()=>{var l;(l=t())==null||l.disconnect(),e=null},observe:l=>{var i;return(i=t())==null?void 0:i.observe(l,{box:"border-box"})},unobserve:l=>{var i;return(i=t())==null?void 0:i.unobserve(l)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,l])=>{typeof l>"u"&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ie,rangeExtractor:ne,onChange:()=>{},measureElement:ae,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...e}},this.notify=e=>{var t,l;(l=(t=this.options).onChange)==null||l.call(t,this,e)},this.maybeNotify=K(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t){this.maybeNotify();return}this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(l=>{this.observer.observe(l)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,l=>{this.scrollRect=l,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(l,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<l?"forward":"backward":null,this.scrollOffset=l,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const l=new Map,i=new Map;for(let o=t-1;o>=0;o--){const r=e[o];if(l.has(r.lane))continue;const c=i.get(r.lane);if(c==null||r.end>c.end?i.set(r.lane,r):r.end<c.end&&l.set(r.lane,!0),l.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,r)=>o.end===r.end?o.index-r.index:o.end-r.end)[0]:void 0},this.getMeasurementOptions=K(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,t,l,i,o)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:l,getItemKey:i,enabled:o}),{key:!1}),this.getMeasurements=K(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:l,getItemKey:i,enabled:o},r)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(a=>{this.itemSizeCache.set(a.key,a.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const f=this.measurementsCache.slice(0,c);for(let a=c;a<e;a++){const b=i(a),p=this.options.lanes===1?f[a-1]:this.getFurthestMeasurement(f,a),m=p?p.end+this.options.gap:t+l,v=r.get(b),S=typeof v=="number"?v:this.options.estimateSize(a),u=m+S,h=p?p.lane:a%this.options.lanes;f[a]={index:a,start:m,size:S,end:u,key:b,lane:h}}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=K(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(e,t,l)=>this.range=e.length>0&&t>0?de({measurements:e,outerSize:t,scrollOffset:l}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=K(()=>{let e=null,t=null;const l=this.calculateRange();return l&&(e=l.startIndex,t=l.endIndex),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,l,i,o)=>i===null||o===null?[]:e({startIndex:i,endIndex:o,overscan:t,count:l}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,l=e.getAttribute(t);return l?parseInt(l,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const l=this.indexFromElement(e),i=this.measurementsCache[l];if(!i)return;const o=i.key,r=this.elementsCache.get(o);r!==e&&(r&&this.observer.unobserve(r),this.observer.observe(e),this.elementsCache.set(o,e)),e.isConnected&&this.resizeItem(l,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const l=this.measurementsCache[e];if(!l)return;const i=this.itemSizeCache.get(l.key)??l.size,o=t-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(l,o,this):l.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(l.index),this.itemSizeCache=new Map(this.itemSizeCache.set(l.key,t)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((t,l)=>{t.isConnected||(this.observer.unobserve(t),this.elementsCache.delete(l))});return}this._measureElement(e,void 0)},this.getVirtualItems=K(()=>[this.getIndexes(),this.getMeasurements()],(e,t)=>{const l=[];for(let i=0,o=e.length;i<o;i++){const r=e[i],c=t[r];l.push(c)}return l},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(t.length!==0)return F(t[W(0,t.length-1,l=>F(t[l]).start,e)])},this.getOffsetForAlignment=(e,t)=>{const l=this.getSize(),i=this.getScrollOffset();t==="auto"&&e>=i+l&&(t="end"),t==="end"&&(e-=l);const o=this.options.horizontal?"scrollWidth":"scrollHeight",c=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-l;return Math.max(Math.min(c,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const l=this.measurementsCache[e];if(!l)return;const i=this.getSize(),o=this.getScrollOffset();if(t==="auto")if(l.end>=o+i-this.options.scrollPaddingEnd)t="end";else if(l.start<=o+this.options.scrollPaddingStart)t="start";else return[o,t];const r=l.start-this.options.scrollPaddingStart+(l.size-i)/2;switch(t){case"center":return[this.getOffsetForAlignment(r,t),t];case"end":return[this.getOffsetForAlignment(l.end+this.options.scrollPaddingEnd,t),t];default:return[this.getOffsetForAlignment(l.start-this.options.scrollPaddingStart,t),t]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:t="start",behavior:l}={})=>{this.cancelScrollToIndex(),l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:l})},this.scrollToIndex=(e,{align:t="auto",behavior:l}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(e,t);if(!i)return;const[o,r]=i;this._scrollToOffset(o,{adjustments:void 0,behavior:l}),l!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const[f]=F(this.getOffsetForIndex(e,r));se(f,this.getScrollOffset())||this.scrollToIndex(e,{align:r,behavior:l})}else this.scrollToIndex(e,{align:r,behavior:l})}))},this.scrollBy=(e,{behavior:t}={})=>{this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let l;return t.length===0?l=this.options.paddingStart:l=this.options.lanes===1?((e=t[t.length-1])==null?void 0:e.end)??0:Math.max(...t.slice(-this.options.lanes).map(i=>i.end)),Math.max(l-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:l})=>{this.options.scrollToFn(e,{behavior:l,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const W=(n,s,e,t)=>{for(;n<=s;){const l=(n+s)/2|0,i=e(l);if(i<t)n=l+1;else if(i>t)s=l-1;else return l}return n>0?n-1:0};function de({measurements:n,outerSize:s,scrollOffset:e}){const t=n.length-1,i=W(0,t,r=>n[r].start,e);let o=i;for(;o<t&&n[o].end<e+s;)o++;return{startIndex:i,endIndex:o}}const _=typeof document<"u"?d.useLayoutEffect:d.useEffect;function fe(n){const s=d.useReducer(()=>({}),{})[1],e={...n,onChange:(l,i)=>{var o;i?q.flushSync(s):s(),(o=n.onChange)==null||o.call(n,l,i)}},[t]=d.useState(()=>new he(e));return t.setOptions(e),_(()=>t._didMount(),[]),_(()=>t._willUpdate()),t}function Ie(n){return fe({observeElementRect:oe,observeElementOffset:ce,scrollToFn:ue,...n})}export{we as $,Se as C,xe as a,j as b,N as c,pe as d,J as e,be as f,ve as g,$e as h,ee as i,te as j,Ie as u};
