import{K as c,r as h,j as e,L as ee,$ as p,V as j,S as Y}from"./app-DhJ3Rndo.js";import{A as se}from"./Authenticated-DCppopgg.js";import{s as x}from"./index-CxtW7q5J.js";import{s as re}from"./statusConstants-B9bmVMgg.js";import{H as ae,t as z}from"./index-lnHEw7Wx.js";import{S as le,a as ne}from"./swiper-react-BH1vYokN.js";import{u,m as f,a as S,b as E,c as N,d as A}from"./index-BvIXqDMG.js";import{b as o}from"./chunk-KCYYJJH4-Dm19h-2m.js";import{t as H,a as $,b as a,c as B,d as q,e as l}from"./chunk-F3UDT23P-DLE-oiDN.js";import{c as te}from"./chunk-J7I6W5JF-CKfcYiWa.js";import{d as oe,a as ie,b as de,m as O}from"./chunk-Z2IJA2C6-VzWmdSPa.js";import{i as ce}from"./chunk-5CAICSBD-DOl_A7pi.js";import"./useMenuTriggerState-B5cIOEVz.js";import"./index-DHe9H3CP.js";import"./chunk-SLABUSGS-J5lLvYsm.js";import"./index-x42ZTnEH.js";import"./LiveAnnouncer-BRxpJmgD.js";function Ie(){var y,P,w,M,R,L;const{asset:r}=c().props,G=(P=(y=c().props.auth)==null?void 0:y.user)==null?void 0:P.role,{isOpen:k,onOpen:F,onClose:d}=u(),[g,C]=h.useState(""),[_,b]=h.useState(""),[D,I]=h.useState(""),[n,J]=h.useState(null),{isOpen:K,onOpen:Q,onClose:T}=u(),{isOpen:W,onOpen:X,onClose:v}=u(),Z=(s,t,i,U,V)=>{if(!i||!U||!V){j.error("Please fill in all fields.");return}Y.post(x("assets.archive",{assetId:s,assetNo:t}),{_method:"PUT",reason:i,status:U,condition:V},{onSuccess:()=>{j.success("Asset archived!"),d()},onError:m=>{j.error("Failed to archive asset. "+((m==null?void 0:m.message)||""))}}),Y.reload()};return e.jsxs(se,{auth:c().props.auth,errors:c().props.errors,children:[e.jsx(ee,{title:`Assets by ${(w=r.employee)==null?void 0:w.EMPLOYEENAME}`}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"my-6",children:G==="admin"&&e.jsx(o,{color:"primary",variant:"flat",as:p,href:x("employees.index"),children:"← Back to Employees"})}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"General Asset Information"}),e.jsxs("div",{className:"border p-4 rounded-lg mb-6",children:[e.jsxs("p",{children:["Asset ID: ",e.jsx("strong",{children:r==null?void 0:r.ASSETSID})]}),e.jsxs("p",{children:["Employee ID:"," ",e.jsx("strong",{children:((M=r==null?void 0:r.employee)==null?void 0:M.EMPLOYEEID)??"--"})]}),e.jsxs("p",{children:["Employee Name:"," ",e.jsx("strong",{children:(R=r==null?void 0:r.employee)==null?void 0:R.EMPLOYEENAME})]})]}),e.jsx("div",{className:"flex justify-start items-center gap-2 mb-3",children:e.jsx(o,{as:p,color:"success",variant:"flat",href:x("assets.viewEmployeeAssets",{id:r.EMPLOYEEID}),children:"View to Print"})}),e.jsxs(H,{maxTableHeight:"300px",isVirtualized:!0,"aria-label":"Asset Details table",isStriped:!0,children:[e.jsxs($,{children:[e.jsx(a,{children:"Asset #"}),e.jsx(a,{children:"System Asset ID"}),e.jsx(a,{children:"Description"}),e.jsx(a,{children:"Model"}),e.jsx(a,{children:"Serial No"}),e.jsx(a,{children:"Date Issued"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Actions"})]}),e.jsx(B,{emptyContent:"No rows to display.",children:r.asset_details.map(s=>{var t;return e.jsxs(q,{children:[e.jsx(l,{children:s.ASSETNUMBER}),e.jsx(l,{children:s.SYSTEMASSETID}),e.jsx(l,{children:s.DESCRIPTION}),e.jsx(l,{children:s.MODEL}),e.jsx(l,{children:s.SERIALNO}),e.jsx(l,{children:s.DATEISSUUED?new Date(s.DATEISSUUED).toLocaleDateString():"--"}),e.jsx(l,{children:e.jsx(te,{color:re[(t=s.STATUS)==null?void 0:t.trim()]||"default",variant:"dot",className:"capitalize border-none gap-1 text-default-600",children:s.STATUS})}),e.jsx(l,{children:e.jsxs(oe,{children:[e.jsx(ie,{children:e.jsx(o,{isIconOnly:!0,size:"sm",variant:"light",children:e.jsx(ae,{size:20,className:"text-default-800"})})}),e.jsxs(de,{children:[e.jsx(O,{onPress:()=>{J(s),Q()},children:"View"},"view"),e.jsx(O,{as:p,href:x("assets.edit",{assetId:s.ASSETID,assetNo:s.ASSETNO}),children:"Update"},"update"),e.jsx(O,{className:"text-danger",color:"danger",onPress:()=>{C(""),b(""),I(""),F()},children:"Dispose"},"dispose")]})]})})]},s.ASSETNO)})})]}),e.jsx(f,{isOpen:K,onClose:T,children:e.jsxs(S,{children:[e.jsx(E,{children:"Asset Details"}),e.jsx(N,{children:n&&e.jsxs("div",{className:"flex flex-wrap gap-6",children:[n.IMAGEPATH&&e.jsx(le,{spaceBetween:10,slidesPerView:1,className:"w-full sm:w-1/2 lg:w-1/3",children:JSON.parse(n.IMAGEPATH).map((s,t)=>e.jsx(ne,{children:e.jsx("img",{src:`/storage/${s}`,alt:`Asset Image ${t+1}`,className:"object-cover w-full h-48 rounded-lg",onError:i=>i.target.src="/assets/placeholder.jpg"})},t))}),e.jsxs("div",{className:"flex-1 space-y-4 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Description:"})," ",n.DESCRIPTION]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Serial Number:"})," ",n.SERIALNO]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Date Issued:"})," ",((L=n.DATEISSUUED)==null?void 0:L.trim())??"--"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Location:"})," ",n.location.LOCATIONNAME]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Condition:"})," ",n.CONDITIONS??"--"]}),e.jsx(o,{color:"primary",variant:"light",onPress:()=>{X()},children:"View components"})]})]})}),e.jsx(A,{children:e.jsx(o,{color:"primary",onPress:T,children:"Close"})})]})}),e.jsx(f,{size:"3xl",isOpen:W,onClose:v,children:e.jsxs(S,{children:[e.jsx(E,{className:"flex flex-col gap-1",children:"Components"}),e.jsx(N,{children:e.jsxs(H,{"aria-label":"Components Table",children:[e.jsxs($,{children:[e.jsx(a,{children:"Component #"}),e.jsx(a,{children:"Component Name"}),e.jsx(a,{children:"Description"}),e.jsx(a,{children:"System Component ID"})]}),e.jsx(B,{emptyContent:"No components to display.",children:((n==null?void 0:n.component_details)||[]).map((s,t)=>{var i;return e.jsxs(q,{children:[e.jsx(l,{children:s.COMPONENTNUMBER}),e.jsx(l,{children:((i=s.asset_component)==null?void 0:i.ASSETCOMPONENTNAME)??"--"}),e.jsx(l,{children:s.COMPONENTDESCRIPTION??"--"}),e.jsx(l,{children:s.SYSTEMCOMPONENTID})]},t)})})]})}),e.jsx(A,{children:e.jsx(o,{color:"danger",variant:"light",onPress:v,children:"Close"})})]})}),e.jsx(f,{isOpen:k,onClose:d,onOpenChange:d,children:e.jsxs(S,{children:[e.jsx(E,{className:"text-danger-500",children:"Are you sure you want to dispose this asset?"}),e.jsxs(N,{children:[e.jsx(ce,{isRequired:!0,label:"Reason for disposal",value:g,onChange:s=>C(s.target.value)}),e.jsx(z,{variant:"faded",isRequired:!0,label:"Asset Status",value:_,onChange:s=>b(s.target.value)}),e.jsx(z,{variant:"faded",isRequired:!0,label:"Asset Condition",value:D,onChange:s=>I(s.target.value)})]}),e.jsxs(A,{children:[e.jsx(o,{color:"warning",onPress:()=>Z(r.asset_details[0].ASSETID,r.asset_details[0].ASSETNO,g,_,D),children:"Confirm"}),e.jsx(o,{color:"danger",variant:"light",onPress:d,children:"Close"})]})]})})]})]})}export{Ie as default};
