import{m as g,r as E,j as s,L as C,$ as P,V as u}from"./app-CMpdZ-fk.js";import{A as N}from"./Authenticated-CwXgvFHG.js";import{b as d}from"./chunk-KCYYJJH4-ISXwqTK4.js";import{i as a}from"./chunk-5CAICSBD-BMNkQpn-.js";import{F as w}from"./chunk-LAX3QLKM-YxaFcRc9.js";import"./index-p4WUfn5Q.js";import"./index-0-18Hqup.js";import"./index-CYDWx15x.js";import"./chunk-SLABUSGS-CABNBQWk.js";const O=({employee:n,user:r,title:m,description:x})=>{const f=!!r,{data:o,setData:t,post:h,put:j,processing:l,errors:p,reset:y}=g({email:(r==null?void 0:r.email)||"",password:"",password_confirmation:""}),[i,c]=E.useState(!1),v=e=>{e.preventDefault(),h(route("employees.createUser",{employee:n.EMPNO}),{onSuccess:()=>{u.success("User created successfully")}})},b=e=>{e.preventDefault(),j(route("employees.updatePassword",{employee:n.EMPNO}),{onSuccess:()=>{u.success("Password updated successfully"),y("password","password_confirmation"),c(!1)}})};return s.jsxs(N,{children:[s.jsx(C,{title:m}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"my-6",children:s.jsx(d,{color:"primary",variant:"flat",as:P,href:route("employees.index"),children:"← Back to Employees"})}),s.jsx("h1",{className:"text-2xl font-bold",children:m}),s.jsx("p",{className:"text-gray-600",children:x}),s.jsxs("h2",{className:"text-xl font-semibold mt-6",children:["Employee: ",n.EMPLOYEENAME]}),f?s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsx(a,{label:"Email",value:r.email}),s.jsx(a,{label:"Role",value:r.user_role}),s.jsx(d,{color:i?"warning":"primary",onPress:()=>c(!i),children:i?"Cancel":"Update Password"}),i&&s.jsxs(w,{onSubmit:b,validationErrors:p,className:"flex flex-col gap-4 mt-4",children:[s.jsx(a,{label:"New Password",type:"password",name:"password",value:o.password,onChange:e=>t("password",e.target.value),isRequired:!0}),s.jsx(a,{label:"Confirm Password",type:"password",name:"password_confirmation",value:o.password_confirmation,onChange:e=>t("password_confirmation",e.target.value),isRequired:!0}),s.jsx(d,{color:"primary",type:"submit",isDisabled:l,children:l?"Updating...":"Update Password"})]})]}):s.jsxs(w,{onSubmit:v,validationErrors:p,className:"w-full flex flex-col gap-4 my-4",children:[s.jsx(a,{label:"Email",type:"email",name:"email",id:"email",value:o.email,onChange:e=>t("email",e.target.value),isRequired:!0}),s.jsx(a,{label:"Password",type:"password",name:"password",id:"password",value:o.password,onChange:e=>t("password",e.target.value),isRequired:!0}),s.jsx(a,{label:"Confirm Password",type:"password",name:"password_confirmation",id:"password_confirmation",value:o.password_confirmation,onChange:e=>t("password_confirmation",e.target.value),isRequired:!0}),s.jsx(d,{color:"primary",type:"submit",isDisabled:l,children:l?"Creating...":"Create User"})]})]})]})};export{O as default};
